# 6장 키-값 저장소 설계

### 키-값 저장소 (키-값 데이터베이스)
- 비관계형 데이터베이스
- 저장되는 값은 고유 식별자를 키로 가져야 함
- 키와 값 사이의 연결관계 : “키-값” 쌍

#### 키
- 유일한 값
- 해당 키에 매달린 값은 키를 통해서만 접근 가능
- 키는 일반 텍스트, 해시 값 둘 다 가능
- 성능상의 이유로 키는 짧을수록 좋음

#### 값
- 값은 문자열, 리스트, 객체 셋 다 가능

#### 널리 알려진 키-값 저장소
- 아마존 다이나모
- Memcached
- 레디스

##

### [단일 서버 키-값 저장소]
- 키-값 쌍 전부를 메모리에 해시 테이블로 저장하는 것
- 빠른 속도를 보장하나, 모든 데이터를 메모리 안에 두는 것이 불가능 할 수도 있음

#### 💡 해결방법
- 데이터 압축
- 자주 쓰이는 데이터만 메모리에 두고 나머지는 디스크에 저장

##

### [분산 키-값 저장소 (분산 해시 테이블)]

분산 시스템을 설계할 때는 CAP 정리 (Consistency, Availability, Partition Tolerance theorem)를 이해해야 함

### CAP 정리

일관성, 가용성, 파티션 감내 라는 세 가지 요구사항을 동시에 만족하는 분산 시스템을 설계하는것은 불가능하다는 정리

**데이터 일관성**
- 분산 시스템에 접속하는 모든 클라이언트는 어떤 노드에 접속했느냐에 관계없이 언제나 같은 데이터를 보게 되어야 한다.

**가용성**
- 분산 시스템에 접속하는 클라이언트는 일부 노드에 장애가 발생하더라도 항상 응답을 받을 수 있어야 한다.

**파티션 감내**
- 파티션은 두 노드 사이에 통신 장애가 발생하였음을 의미
- 네트워크에 파티션이 생기더라도 시스템은 게속 동작하여야 한다는 것